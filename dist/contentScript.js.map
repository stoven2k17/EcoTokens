{"version":3,"file":"contentScript.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://ecotokens/./src/contentScript/contentScript.ts"],"sourcesContent":["window.onload = () => {\n    console.log('EcoTokens: Content script is active');\n    const observeDOM = () => {\n        const promptTextarea = document.querySelector('#prompt-textarea[contenteditable=\"true\"]');\n        const sendButton = document.querySelector('button[aria-label=\"Send prompt\"]');\n        const fileInput = document.querySelector('input[type=\"file\"]');\n        if (promptTextarea && sendButton) {\n            console.log('EcoTokens: Found ChatGPT prompt text area and Send button.');\n            if (!promptTextarea.dataset.observing) {\n                promptTextarea.dataset.observing = \"true\";\n                // Add keydown listener for Enter key\n                promptTextarea.addEventListener('keydown', (event) => {\n                    var _a;\n                    if (event.key === 'Enter' && !event.shiftKey) {\n                        const prompt = ((_a = promptTextarea.textContent) === null || _a === void 0 ? void 0 : _a.trim()) || '';\n                        console.log('Captured prompt on Enter:', prompt);\n                        // Send the captured prompt to the background script\n                        chrome.runtime.sendMessage({ action: 'capturePrompt', prompt });\n                    }\n                });\n                // Add paste listener to capture pasted images or text\n                promptTextarea.addEventListener('paste', (event) => {\n                    const clipboardData = event.clipboardData;\n                    if (clipboardData) {\n                        const items = clipboardData.items;\n                        for (const item of items) {\n                            if (item.type.startsWith('image/')) {\n                                const file = item.getAsFile();\n                                if (file) {\n                                    console.log('Captured pasted image:', file);\n                                    // Send the captured image file to the background script\n                                    chrome.runtime.sendMessage({\n                                        action: 'captureImage',\n                                        file: {\n                                            name: file.name,\n                                            type: file.type,\n                                            size: file.size,\n                                        },\n                                    });\n                                }\n                            }\n                        }\n                    }\n                });\n                console.log('EcoTokens: Added listeners to the prompt text area.');\n            }\n            if (!sendButton.dataset.observing) {\n                sendButton.dataset.observing = \"true\";\n                // Add click listener for the Send button\n                sendButton.addEventListener('click', () => {\n                    var _a;\n                    const prompt = ((_a = promptTextarea.textContent) === null || _a === void 0 ? void 0 : _a.trim()) || '';\n                    console.log('Captured prompt on Send click:', prompt);\n                    // Send the captured prompt to the background script\n                    chrome.runtime.sendMessage({ action: 'capturePrompt', prompt });\n                });\n                console.log('EcoTokens: Observing the Send button for clicks.');\n            }\n        }\n        if (fileInput && !fileInput.dataset.observing) {\n            fileInput.dataset.observing = \"true\";\n            // Add change listener to capture file uploads\n            fileInput.addEventListener('change', (event) => {\n                const files = fileInput.files;\n                if (files && files.length > 0) {\n                    console.log('Captured uploaded files:', files);\n                    // Collect file details and send to the background script\n                    const fileDetails = Array.from(files).map((file) => ({\n                        name: file.name,\n                        type: file.type,\n                        size: file.size,\n                    }));\n                    chrome.runtime.sendMessage({ action: 'captureFiles', files: fileDetails });\n                }\n            });\n            console.log('EcoTokens: Observing the file input for uploads.');\n        }\n    };\n    // Observe the entire document for changes to detect when #prompt-textarea, Send button, or file input are added/replaced\n    const observer = new MutationObserver(observeDOM);\n    observer.observe(document.body, { childList: true, subtree: true });\n    console.log('EcoTokens: Watching for dynamic changes in the DOM.');\n};\n"],"names":[],"sourceRoot":""}